<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>14502번 - 연구소</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  <style>
    .md-container {
      width : min(775px, 90vw);
      margin :auto;
    }

    pre {
      border: 0.5px solid lightgray;
      background-color:  #f7f7f7;
      margin-top : 30px;
      margin-bottom : 30px;
    }

    img {
      width: 100%;
      margin-top : 25px;
      margin-bottom : 25px;
    }

    h2 {
      margin-top : 40px;
      margin-bottom : 40px;
    }

    h3 {
      margin-top : 40px;
      margin-bottom : 40px;
    }
    h4 {
      margin-top : 40px;
      margin-bottom : 40px;
    }
    h5 {
      margin-top : 40px;
      margin-bottom : 40px;
    }

  </style>
</head>
<body>
  <div class="md-container">
    <h2 class="fw-bold">14502번 - 연구소</h2>
<h4 id="-">분류 : 구현, 너비 우선 탐색</h4>
<h4 id="-">문제</h4>
<p>인체에 치명적인 바이러스를 연구하던 연구소에서 바이러스가 유출되었다. 다행히 바이러스는 아직 퍼지지 않았고, 바이러스의 확산을 막기 위해서 연구소에 벽을 세우려고 한다.</p>
<p>연구소는 크기가 N×M인 직사각형으로 나타낼 수 있으며, 직사각형은 1×1 크기의 정사각형으로 나누어져 있다. 연구소는 빈 칸, 벽으로 이루어져 있으며, 벽은 칸 하나를 가득 차지한다. </p>
<p>일부 칸은 바이러스가 존재하며, 이 바이러스는 상하좌우로 인접한 빈 칸으로 모두 퍼져나갈 수 있다. 새로 세울 수 있는 벽의 개수는 3개이며, 꼭 3개를 세워야 한다.</p>
<p>예를 들어, 아래와 같이 연구소가 생긴 경우를 살펴보자.</p>
<pre><code><span class="hljs-symbol">2 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
</code></pre><p>이때, 0은 빈 칸, 1은 벽, 2는 바이러스가 있는 곳이다. 아무런 벽을 세우지 않는다면, 바이러스는 모든 빈 칸으로 퍼져나갈 수 있다.</p>
<p>2행 1열, 1행 2열, 4행 6열에 벽을 세운다면 지도의 모양은 아래와 같아지게 된다.</p>
<pre><code><span class="hljs-symbol">2 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">1 </span><span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
</code></pre><p>바이러스가 퍼진 뒤의 모습은 아래와 같아진다.</p>
<pre><code><span class="hljs-symbol">2 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span>
<span class="hljs-symbol">1 </span><span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">1</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
<span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>
</code></pre><p>벽을 3개 세운 뒤, 바이러스가 퍼질 수 없는 곳을 안전 영역이라고 한다. 위의 지도에서 안전 영역의 크기는 27이다.</p>
<p>연구소의 지도가 주어졌을 때 얻을 수 있는 안전 영역 크기의 최댓값을 구하는 프로그램을 작성하시오.</p>
<h4 id="-">풀이</h4>
<p>추가적으로 벽은 3개를 지을 수 있고 무조건 3개만 지어야 한다.</p>
<p>N,M은 최대가 8이다. 따라서 벽의 조합의 경우의수는</p>
<p>최대 64C3 = 41664 가 된다.</p>
<p>각 케이스마다 bfs를 한다고 해도 시간초과가 걸리는 일은 없을 것이다.</p>
<p>makeWallCase 메서드를 만들고 재귀를 통해 조합을 구현했다.</p>
<p>배열에 따로 wallCase를 저장하기 때문에 조합이 나올 때 마다 새로운 배열에 arraycopy를 해 참조변수로 인한 문제를 해결한다.</p>
<p>getVirusPos 메서들르 만들고 main 메서드가 호출 될 때 한 번 호출되어 입력받은 배열에 바이러스의 위치를 따로 static List변수에 저장한다.</p>
<p>이 바이러스 위치에 대한 List는 bfs가 실행될 때마다 queue의 초기 값으로 전부 집어넣는다.</p>
<p>bfs를 하면서 바이러스가 옮긴 자리는 2로 배열의 값을 변경하고</p>
<p>bfs가 끝나면 안전지대의 개수를 세 return한다.</p>
<p>bfs가 끝나면 arraycopy를 통해 이전 배열 상태로 되돌린다.</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> java.io.<span class="hljs-keyword">BufferedReader</span>;
<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.io.InputStreamReader;
<span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> class Main {
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> n,m;
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span>[][] arr;
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span>[][] arrSave;
    <span class="hljs-keyword">static</span> List&lt;<span class="hljs-built_in">int</span>[][]&gt; wallCase;
    <span class="hljs-keyword">static</span> List&lt;<span class="hljs-built_in">int</span>[]&gt; virus;
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span>[] dx = {<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>};
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span>[] dy = {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-1</span>};

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(<span class="hljs-keyword">String</span>[] args) <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">BufferedReader</span> br = <span class="hljs-keyword">new</span> <span class="hljs-keyword">BufferedReader</span>(<span class="hljs-keyword">new</span> InputStreamReader(System.in));
        StringTokenizer st = <span class="hljs-keyword">new</span> StringTokenizer(br.readLine());

        n = Integer.parseInt(st.nextToken());
        m = Integer.parseInt(st.nextToken());

        arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[n][m];
        arrSave = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[n][m];
        wallCase = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
        virus = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();

        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
            st = <span class="hljs-keyword">new</span> StringTokenizer(br.readLine());
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++) {
                <span class="hljs-built_in">int</span> tmp = Integer.parseInt(st.nextToken());

                arr[i][j] = tmp;
                arrSave[i][j] = tmp;
            }
        }
        getVirusPos();
        makeWallCase(<span class="hljs-number">0</span>,<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">3</span>][<span class="hljs-number">2</span>]);

        <span class="hljs-built_in">int</span> res = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span>[][] wall : wallCase) {
            fillWall(wall);
            res = Math.<span class="hljs-built_in">max</span>(res,bfs());
            copySave();
        }

        System.out.<span class="hljs-built_in">println</span>(res);
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> makeWallCase(<span class="hljs-built_in">int</span> cnt, <span class="hljs-built_in">int</span>[][] walls) {
        <span class="hljs-keyword">if</span> (cnt == <span class="hljs-number">3</span>) {
            <span class="hljs-built_in">int</span>[][] tmp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[<span class="hljs-number">3</span>][<span class="hljs-number">2</span>];
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++)
                System.arraycopy(walls[i], <span class="hljs-number">0</span>, tmp[i], <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
            wallCase.<span class="hljs-built_in">add</span>(tmp);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-built_in">int</span> a,b;
        <span class="hljs-keyword">if</span> (cnt == <span class="hljs-number">0</span>) {
            a = <span class="hljs-number">-1</span>;
            b = <span class="hljs-number">-1</span>;
        } <span class="hljs-keyword">else</span> {
            a = walls[cnt - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>];
            b = walls[cnt - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>];
        }

        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++) {
                <span class="hljs-keyword">if</span> (i &lt; a || (i == a &amp;&amp; j &lt;= b) || arr[i][j] != <span class="hljs-number">0</span>)
                    <span class="hljs-keyword">continue</span>;
                walls[cnt][<span class="hljs-number">0</span>] = i;
                walls[cnt][<span class="hljs-number">1</span>] = j;
                makeWallCase(cnt + <span class="hljs-number">1</span>, walls);
            }
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> getVirusPos() {
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++)
                <span class="hljs-keyword">if</span> (arr[i][j] == <span class="hljs-number">2</span>)
                    virus.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[] {i,j});
    }

    <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> bfs() {
        Queue&lt;<span class="hljs-built_in">int</span>[]&gt; queue = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();
        <span class="hljs-built_in">boolean</span>[][] visited = <span class="hljs-keyword">new</span> <span class="hljs-built_in">boolean</span>[n][m];

        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span>[] v : virus) {
            queue.<span class="hljs-built_in">add</span>(v);
            visited[v[<span class="hljs-number">0</span>]][v[<span class="hljs-number">1</span>]] = <span class="hljs-keyword">true</span>;
        }

        <span class="hljs-keyword">while</span> (queue.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">int</span>[] node = queue.poll();
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) {
                <span class="hljs-built_in">int</span> nx = node[<span class="hljs-number">0</span>] + dx[i];
                <span class="hljs-built_in">int</span> ny = node[<span class="hljs-number">1</span>] + dy[i];

                <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> &lt;= nx &amp;&amp; nx &lt; n &amp;&amp; <span class="hljs-number">0</span> &lt;= ny &amp;&amp; ny &lt; m &amp;&amp; !visited[nx][ny] &amp;&amp; arr[nx][ny] == <span class="hljs-number">0</span>) {
                    visited[nx][ny] = <span class="hljs-keyword">true</span>;
                    arr[nx][ny] = <span class="hljs-number">2</span>;
                    queue.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[] {nx,ny});
                }
            }
        }

        <span class="hljs-keyword">return</span> getSafeArea();
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> fillWall(<span class="hljs-built_in">int</span>[][] walls) {
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span>[] wall : walls)
            arr[wall[<span class="hljs-number">0</span>]][wall[<span class="hljs-number">1</span>]] = <span class="hljs-number">1</span>;
    }

    <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> getSafeArea() {
        <span class="hljs-built_in">int</span> res = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++)
                <span class="hljs-keyword">if</span> (arr[i][j] == <span class="hljs-number">0</span>)
                    res++;
        <span class="hljs-keyword">return</span> res;
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> copySave() {
        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)
            <span class="hljs-keyword">if</span> (m &gt;= <span class="hljs-number">0</span>) System.arraycopy(arrSave[i], <span class="hljs-number">0</span>, arr[i], <span class="hljs-number">0</span>, m);
    }
}
</code></pre>

  </div>
</body>
</html>